# youtube-clipper

Tool for finding clips in YouTube videos. Supports searching in multiple videos, e.g. in playlists or channels.

YouTube Clipper (YTC) download subtitles (without the videos themselves) using [yt-dlp](https://github.com/yt-dlp/yt-dlp), parses them using provided parsers and converters and performs the search using [whoosh](https://whoosh.readthedocs.io). 

## Installation from source

1. Clone the repository: `git clone git@github.com:MCPN/youtube-clipper.git`.
2. Install poetry: `pip install poetry`.
3. Install `youtube-clipper` using `poetry`: `cd youtube-clipper && poetry install`.
4. To install tests dependencies, run `poetry install --with tests`.

## Usage

Basic usage: `youtube-clipper --url https://www.youtube.com/watch?v=dQw4w9WgXcQ --query 'were no strangers to love' --allow-autogenerated`.

For a full list of settings, run `youtube-clipper --help`.

The query argument supports the whoosh query language that can be found in the [official documentation](https://whoosh.readthedocs.io/en/latest/querylang.html). For example, by default query doesn't require every word to appear in the result, however, this behaviour can be enabled by wrapping the query in "brackets" (be careful with the bash escaping tho!).

## Parsers and converters

TODO

## Tests

Testing done using pytest: `pytest tests`.

Type checking done using mypy: `mypy youtube_clipper`. However, it's not very efficient, as most of the dependencies doesn't have stubs.
